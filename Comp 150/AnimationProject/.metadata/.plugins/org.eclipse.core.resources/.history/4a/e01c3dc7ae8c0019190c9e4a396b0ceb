import java.math.BigDecimal;
import java.math.MathContext;
import java.math.RoundingMode;

public class ErrorsWithBigDecimal {
	static MathContext mc = new MathContext(2);
	
	// The textbook is horribly out of date with the changes to BigDecimal.
	// Clean up this code later by creating a BigDecimalHandler class to 
	//   simplify using BigDecimals.
	public static void main(String[] args) {
		int age = 30;
		BigDecimal retirementFund = 
			new BigDecimal("10000.00", mc);
		// set the scale to 2 decimal points
		// and the rounding to round up when the next digit is >= 5
		BigDecimal yearsInRetirement = 
			new BigDecimal("20.00", mc);
		String name = "David Johnson";
		for (int i = age; i <= 65; i++){
			retirementFund = recalculate(retirementFund,new BigDecimal("0.10", mc));
			System.out.println(retirementFund);
		}
		
		BigDecimal monthlyPension = retirementFund.divide(
				yearsInRetirement.multiply(
					new BigDecimal("12.00", mc),
				    mc),
				mc
		);
		System.out.println(name + " will have $" + monthlyPension.setScale(2, RoundingMode.HALF_UP)
				+ " per month for retirement.");
	}
	
	public static BigDecimal recalculate(BigDecimal fundAmount, BigDecimal rate){
		// use BigDecimal methods for arithmetic operations
		return fundAmount.multiply(rate.add(new BigDecimal("1.00", mc)), mc);
	}
}